(this.webpackJsonpproyectopsa=this.webpackJsonpproyectopsa||[]).push([[0],{127:function(e,t,a){},130:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var s=a(2),i=a(19),c=a.n(i),n=(a(138),a(139),a(8)),r=a(9),o=a(11),d=a(10),l=a(345),h=a(344),j=a(352),u=a(353),b=a(347),O=a(348),p=a(349),x=a(350),m=a(354),g=a(355),f=a(77),y=a.n(f),v=a(131),k=a(7),T=a(338),C=a(359),S=a(339),M=a(340),P=a(341),N=a(342),E=a(343),I=a(346),R=(a(35),a(31)),B=a.n(R),F=function(){function e(){Object(n.a)(this,e),this.id=0,this.file=0,this.idProject=0,this.idTask=0,this.quantityHours=0,this.quantityMinutes=0,this.date=0,this.loadingDate=0,this.nameProject="",this.nameTask="",this.id=0,this.file=0,this.idProject=0,this.idTask=0,this.quantityHours=0,this.quantityMinutes=15,this.date=0,this.loadingDate=0,this.nameProject="",this.nameTask=""}return Object(r.a)(e,[{key:"HoursModel",value:function(e,t,a,s,i,c,n,r,o,d){this.id=e,this.file=t,this.idProject=a,this.idTask=s,this.quantityHours=i,this.quantityMinutes=c,this.date=n,this.loadingDate=r,this.nameProject=o,this.nameTask=d}},{key:"getIdProject",value:function(){return this.idProject}},{key:"setIdProject",value:function(e){this.idProject=e}},{key:"getIdTask",value:function(){return this.idTask}},{key:"setIdTask",value:function(e){this.idTask=e}},{key:"getHoursAsString",value:function(){var e=this.quantityMinutes,t=this.quantityHours;return 0==e&&(e="00"),t<10&&(t="0"+t),t+":"+e}},{key:"getDateAsString",value:function(){var e=this.date.toString(),t=e.substr(0,4),a=e.substr(4,2),s=e.substr(6,2);return"".concat(s,"/").concat(a,"/").concat(t)}},{key:"setNewHours",value:function(e,t){this.quantityHours=e,this.quantityMinutes=t}},{key:"completeData",value:function(){return 0!==this.idTask&&(0!==this.quantityHours||0!==this.quantityMinutes)&&0!==this.date}}]),e}(),D=(a(42),a(127),a(15)),H=a.n(D),q=(a(128),a(18)),L=a.n(q),w=a(0),_=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;Object(n.a)(this,a),s=t.call(this,e);var i=new F;return i.file=e.file,s.state={isShow:!1,hoursModel:i,lstProjects:[],lstTasks:[],isTaskDisabled:!0,taskIsLoading:!1,errorMessage:""},s.saveHours=s.saveHours.bind(Object(k.a)(s)),s.changeVisibility=s.changeVisibility.bind(Object(k.a)(s)),s.saveHoursWithEnter=s.saveHoursWithEnter.bind(Object(k.a)(s)),s}return Object(r.a)(a,[{key:"changeVisibility",value:function(){this.setState({isShow:!this.state.isShow,errorMessage:"",isTaskDisabled:!0}),this.state.hoursModel.setIdProject(0),this.state.hoursModel.setIdTask(0),this.state.hoursModel.date=0}},{key:"saveHoursWithEnter",value:function(e){"Enter"===e.key&&this.changeVisibility()}},{key:"saveHours",value:function(){if(this.isFormValid()){var e={file:this.state.hoursModel.file,idProject:this.state.hoursModel.idProject,idTask:this.state.hoursModel.idTask,quantityHours:this.state.hoursModel.quantityHours,quantityMinutes:this.state.hoursModel.quantityMinutes,date:this.state.hoursModel.date},t=this.state.hoursModel.getDateAsString(),a=this.state.hoursModel.getHoursAsString(),s=this;L.a.fire({title:"Cargar horas",text:"\xbfEst\xe1 seguro que desea agregar "+a+" horas del "+t+"?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",dangerMode:"true",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then((function(i){i.isConfirmed&&fetch("https://squad6-backend.herokuapp.com/hours",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error;s.changeVisibility(),s.props.onReload(),L.a.fire({title:"Se agregaron "+a+" horas del "+t+".",icon:"success"})})).catch((function(e){s.setState({errorMessage:"No se puede cargar m\xe1s de 24 horas un mismo d\xeda"})}))}))}else this.setState({errorMessage:"Por favor, complete todos los campos obligatorios"})}},{key:"onTimeChange",value:function(e){this.state.hoursModel.setNewHours(parseInt(e.hour),parseInt(e.minute)),this.setState({hoursModel:this.state.hoursModel})}},{key:"onDateChange",value:function(e){var t=e.replace(/-/gi,"");isNaN(parseInt(t))?this.state.hoursModel.date=0:this.state.hoursModel.date=parseInt(t)}},{key:"isFormValid",value:function(){return this.state.hoursModel.completeData()}},{key:"componentDidMount",value:function(){var e=this;fetch("https://proyectopsa.herokuapp.com/proyectos/").then((function(e){return e.json()})).then((function(t){e.setState({lstProjects:t})}),(function(e){console.log(e)}))}},{key:"getListTasks",value:function(){var e=Object(v.a)(y.a.mark((function e(){var t,a=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="https://proyectopsa.herokuapp.com/proyectos/"+this.state.hoursModel.getIdProject()+"/tarea/",fetch(t).then((function(e){return e.json()})).then((function(e){a.setState({lstTasks:e})}),(function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onProjectChange",value:function(e){var t=this;this.setState({taskIsLoading:!0}),this.state.hoursModel.setIdProject(e);var a=0==e;if(a)this.setState({hoursModel:this.state.hoursModel,lstTasks:[],isTaskDisabled:a,taskIsLoading:!1});else{var s="https://proyectopsa.herokuapp.com/proyectos/"+this.state.hoursModel.getIdProject()+"/tarea/";fetch(s).then((function(e){return e.json()})).then((function(a){var s=[];a.forEach((function(a){var i="https://proyectopsa.herokuapp.com/proyectos/"+e.toString()+"/tarea/"+a.codigo.toString();fetch(i).then((function(e){return e.json()})).then((function(e){e.tarea.codigoRecurso==t.state.hoursModel.file&&s.push(e.tarea),t.setState({hoursModel:t.state.hoursModel,lstTasks:s,isTaskDisabled:!1,taskIsLoading:!1})}),(function(e){console.log(e)}))}))}),(function(e){console.log(e)}))}}},{key:"onTaskChange",value:function(e){this.state.hoursModel.setIdTask(parseInt(e)),this.setState({hoursModel:this.state.hoursModel})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{color:"primary",onClick:this.changeVisibility,children:"Nueva"}),Object(w.jsxs)(C.a,{isOpen:this.state.isShow,toggle:this.changeVisibility,onKeyPress:this.saveHoursWithEnter,children:[Object(w.jsx)(S.a,{toggle:this.changeVisibility,children:"Carga de Horas"}),Object(w.jsxs)(M.a,{onKeyPress:this.saveHoursWithEnter,children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Proyecto *"}),Object(w.jsxs)(E.a,{type:"select",onChange:function(t){return e.onProjectChange(t.target.value)},children:[Object(w.jsx)("option",{value:"0"}),this.state.lstProjects.map((function(e){return Object(w.jsx)("option",{value:e.codigo,children:e.nombre},e.codigo)}))]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Tarea *"}),this.state.taskIsLoading?Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:30,width:30})}):Object(w.jsxs)(E.a,{type:"select",disabled:this.state.isTaskDisabled,onChange:function(t){return e.onTaskChange(t.target.value)},children:[Object(w.jsx)("option",{value:"0"}),this.state.lstTasks.map((function(e){return Object(w.jsx)("option",{value:e.codigo,children:e.nombre},e.codigo)}))]})]}),Object(w.jsx)(P.a,{children:Object(w.jsxs)(l.a,{children:[Object(w.jsxs)(h.a,{lg:6,children:[Object(w.jsx)(N.a,{children:"Cantidad de Horas *"}),Object(w.jsx)(B.a,{theme:"classic",time:this.state.hoursModel.getHoursAsString(),timeMode:"24",timeConfig:{from:"0:15",to:"23:45",step:15,unit:"minutes"},onTimeChange:this.onTimeChange.bind(this)})]}),Object(w.jsxs)(h.a,{lg:6,children:[Object(w.jsx)(N.a,{children:"Fecha *"}),Object(w.jsx)(E.a,{type:"date",max:(new Date).toISOString().split("T")[0],onChange:function(t){return e.onDateChange(t.target.value)}})]})]})}),Object(w.jsx)(P.a,{children:Object(w.jsxs)(h.a,{className:"col-datos-oblig",children:["(*) Campos obligatorios",Object(w.jsx)("hr",{})]})}),Object(w.jsx)(P.a,{check:!0,row:!0,children:Object(w.jsx)(h.a,{sm:{size:10,offset:9},children:Object(w.jsx)(T.a,{color:"primary",onClick:this.saveHours,children:"Guardar"})})}),this.state.errorMessage?Object(w.jsxs)(I.a,{id:"alerta",color:"danger",children:[" ",this.state.errorMessage," "]}):null]})]})]})}}]),a}(s.Component),V=a(12),A=a(351),z=a(32),W=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;Object(n.a)(this,a),s=t.call(this,e);var i=new F;return i.file=e.hours.file,s.state={isShow:!1,hoursModel:i,lstProjects:[],lstTasks:[],isTaskDisabled:!1,taskIsLoading:!1,errorMessage:""},s.state.hoursModel.setIdProject(s.props.hours.idProject),s.state.hoursModel.setIdTask(s.props.hours.idTask),s.state.hoursModel.setNewHours(s.props.hours.quantityHours,s.props.hours.quantityMinutes),s.state.hoursModel.date=s.props.hours.date,s.saveHoursById=s.saveHoursById.bind(Object(k.a)(s)),s.changeVisibility=s.changeVisibility.bind(Object(k.a)(s)),s.saveHoursWithEnter=s.saveHoursWithEnter.bind(Object(k.a)(s)),s.getListTasks=s.getListTasks.bind(Object(k.a)(s)),s.getListTasks(),s}return Object(r.a)(a,[{key:"changeVisibility",value:function(){this.setState({isShow:!this.state.isShow,errorMessage:""})}},{key:"saveHoursWithEnter",value:function(e){"Enter"===e.key&&this.changeVisibility()}},{key:"saveHoursById",value:function(){if(this.isFormValid()){var e="https://squad6-backend.herokuapp.com/hours/"+this.props.hours.id,t={id:this.props.hours.id,file:this.props.hours.file,idProject:this.state.hoursModel.idProject,idTask:this.state.hoursModel.idTask,quantityHours:this.state.hoursModel.quantityHours,quantityMinutes:this.state.hoursModel.quantityMinutes,date:this.state.hoursModel.date,loadingDate:this.props.hours.loadingDate},a=(this.state.hoursModel.getDateAsString(),this.state.hoursModel.getHoursAsString(),this);L.a.fire({title:"Modificar horas",text:"\xbfEst\xe1 seguro que desea modificar estas horas?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",dangerMode:"true",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then((function(s){s.isConfirmed&&fetch(e,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error;a.props.hours.idTask=a.state.hoursModel.idTask,a.props.hours.idProject=a.state.hoursModel.idProject,a.changeVisibility(),a.props.onReload(),L.a.fire({title:"Se modificaron las horas correctamente.",icon:"success"})})).catch((function(e){a.setState({errorMessage:"No se puede cargar m\xe1s de 24 horas un mismo d\xeda"})}))}))}else this.setState({errorMessage:"Por favor, complete todos los campos obligatorios"})}},{key:"onTimeChange",value:function(e){this.state.hoursModel.setNewHours(parseInt(e.hour),parseInt(e.minute)),this.setState({hoursModel:this.state.hoursModel})}},{key:"onDateChange",value:function(e){var t=e.replace(/-/gi,"");isNaN(parseInt(t))?this.state.hoursModel.date=0:(this.state.hoursModel.date=parseInt(t),this.setState({hoursModel:this.state.hoursModel}))}},{key:"isFormValid",value:function(){return this.state.hoursModel.completeData()}},{key:"componentDidMount",value:function(){var e=this;fetch("https://proyectopsa.herokuapp.com/proyectos/").then((function(e){return e.json()})).then((function(t){e.setState({lstProjects:t})}),(function(e){console.log(e)}))}},{key:"getListTasks",value:function(){var e=this,t=this.state.hoursModel.getIdProject();fetch("https://proyectopsa.herokuapp.com/proyectos/"+t+"/tarea/").then((function(e){return e.json()})).then((function(a){var s=[];a.forEach((function(a){var i="https://proyectopsa.herokuapp.com/proyectos/"+t.toString()+"/tarea/"+a.codigo.toString();fetch(i).then((function(e){return e.json()})).then((function(t){t.tarea.codigoRecurso==e.state.hoursModel.file&&s.push(t.tarea),e.setState({hoursModel:e.state.hoursModel,lstTasks:s,isTaskDisabled:!1,taskIsLoading:!1})}),(function(e){console.log(e)}))}))}),(function(e){console.log(e)}))}},{key:"onProjectChange",value:function(e){this.setState({taskIsLoading:!0}),this.state.hoursModel.setIdProject(e),this.state.hoursModel.setIdTask(0);var t=0==e;t?this.setState({hoursModel:this.state.hoursModel,lstTasks:[],isTaskDisabled:t,taskIsLoading:!1}):this.getListTasks()}},{key:"onTaskChange",value:function(e){this.state.hoursModel.setIdTask(parseInt(e)),this.setState({hoursModel:this.state.hoursModel})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{type:"button",className:"btn btn-sm btn-rounded ",onClick:this.changeVisibility,style:{marginTop:"-7px",color:"blue"},children:Object(w.jsx)(z.b,{})}),Object(w.jsxs)(C.a,{isOpen:this.state.isShow,toggle:this.changeVisibility,onKeyPress:this.saveHoursWithEnter,children:[Object(w.jsx)(S.a,{toggle:this.changeVisibility,children:"Modificar hora cargada"}),Object(w.jsxs)(M.a,{onKeyPress:this.saveHoursWithEnter,children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Proyecto *"}),Object(w.jsxs)(E.a,{type:"select",onChange:function(t){return e.onProjectChange(t.target.value)},value:this.state.hoursModel.idProject.toString(),children:[Object(w.jsx)("option",{value:"0"}),this.state.lstProjects.map((function(e){return Object(w.jsx)("option",{value:e.codigo,children:e.nombre},e.codigo)}))]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Tarea *"}),this.state.taskIsLoading?Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:30,width:30})}):Object(w.jsxs)(E.a,{type:"select",disabled:this.state.isTaskDisabled,onChange:function(t){return e.onTaskChange(t.target.value)},value:this.state.hoursModel.idTask.toString(),children:[Object(w.jsx)("option",{value:"0"}),this.state.lstTasks.map((function(e){return Object(w.jsx)("option",{value:e.codigo,children:e.nombre},e.codigo)}))]})]}),Object(w.jsx)(P.a,{children:Object(w.jsxs)(l.a,{children:[Object(w.jsxs)(h.a,{lg:6,children:[Object(w.jsx)(N.a,{children:"Cantidad de Horas *"}),Object(w.jsx)(B.a,{theme:"classic",time:this.state.hoursModel.getHoursAsString(),timeMode:"24",timeConfig:{from:"0:15",to:"23:45",step:15,unit:"minutes"},onTimeChange:this.onTimeChange.bind(this)})]}),Object(w.jsxs)(h.a,{lg:6,children:[Object(w.jsx)(N.a,{children:"Fecha *"}),Object(w.jsx)(E.a,{type:"date",max:(new Date).toISOString().split("T")[0],onChange:function(t){return e.onDateChange(t.target.value)},value:this.state.hoursModel.date.toString().substr(0,4)+"-"+this.state.hoursModel.date.toString().substr(4,2)+"-"+this.state.hoursModel.date.toString().substr(6,2)})]})]})}),Object(w.jsx)(P.a,{children:Object(w.jsxs)(h.a,{className:"col-datos-oblig",children:["(*) para aquellos campos que sean requeridos obligatoriamente",Object(w.jsx)("hr",{})]})}),Object(w.jsx)(P.a,{check:!0,row:!0,children:Object(w.jsx)(h.a,{sm:{size:10,offset:9},children:Object(w.jsx)(T.a,{color:"primary",onClick:this.saveHoursById,children:"Guardar"})})}),this.state.errorMessage?Object(w.jsxs)(I.a,{id:"alerta",color:"danger",children:[" ",this.state.errorMessage," "]}):null]})]})]})}}]),a}(s.Component),G=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isLoading:!0,nameProject:"",nameTask:""},s.deleteHoursById=s.deleteHoursById.bind(Object(k.a)(s)),s.reloadItem=s.reloadItem.bind(Object(k.a)(s)),s.fetchTaskAndProjectNames=s.fetchTaskAndProjectNames.bind(Object(k.a)(s)),s}return Object(r.a)(a,[{key:"deleteHoursById",value:function(){var e=this,t="https://squad6-backend.herokuapp.com/hours/"+this.props.hours.id;L.a.fire({title:"Eliminar la hora",text:"\xbfEst\xe1 seguro que desea eliminar "+this.props.hours.getHoursAsString()+" horas del "+this.props.hours.getDateAsString()+"?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",dangerMode:"true",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then((function(a){a.isConfirmed&&(e.setState({isLoading:!0}),fetch(t,{method:"DELETE"}).then((function(){L.a.fire({title:"Se borraron "+e.props.hours.getHoursAsString()+" horas del "+e.props.hours.getDateAsString()+" con \xe9xito.",icon:"success"}),e.setState({isLoading:!1}),e.props.onReload()})))}))}},{key:"fetchTaskAndProjectNames",value:function(){var e=this,t="https://proyectopsa.herokuapp.com/proyectos/"+this.props.hours.idProject.toString()+"/tarea/"+this.props.hours.idTask.toString();fetch(t).then((function(e){return e.json()})).then((function(t){var a="-",s="-";null!=t.tarea&&(a=t.tarea.nombre,s=t.tarea.nombreProyecto),e.setState({isLoading:!1,nameProject:s,nameTask:a})}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.fetchTaskAndProjectNames()}},{key:"reloadItem",value:function(){this.props.onReload(),this.fetchTaskAndProjectNames()}},{key:"render",value:function(){return this.state.isLoading?Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:7,children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:15,width:15})})}):Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:this.state.nameProject}),Object(w.jsx)("td",{children:this.state.nameTask}),Object(w.jsx)("td",{children:this.props.hours.getDateAsString()}),Object(w.jsx)("td",{children:this.props.hours.quantityHours}),Object(w.jsx)("td",{children:this.props.hours.quantityMinutes}),Object(w.jsx)("td",{children:Object(w.jsx)(W,{hours:this.props.hours,onReload:this.reloadItem,children:" "})}),Object(w.jsx)("td",{children:Object(w.jsx)("button",{type:"button",className:"btn btn-sm btn-rounded",onClick:this.deleteHoursById,style:{marginTop:"-7px",color:"red"},children:Object(w.jsx)(z.c,{})})})]})}}]),a}(s.Component),J=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isLoading:!0,lstHours:[]},s.onReloadGrid=s.onReloadGrid.bind(Object(k.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/hoursFile/"+this.props.file.toString()).then((function(e){return e.json()})).then((function(t){var a=[];t.forEach((function(e){var t=new F;t.id=e.id,t.file=e.file,t.idProject=e.idProject,t.idTask=e.idTask,t.quantityHours=e.quantityHours,t.quantityMinutes=e.quantityMinutes,t.date=e.date,t.loadingDate=e.loadingDate,a.push(t)})),a.sort((function(e,t){return e.date<t.date?1:-1})),e.setState({isLoading:!1,lstHours:a})}),(function(e){console.log(e)}))}},{key:"onReloadGrid",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/hoursFile/"+this.props.file.toString()).then((function(e){return e.json()})).then((function(t){var a=[];t.forEach((function(e){var t=new F;t.id=e.id,t.file=e.file,t.idProject=e.idProject,t.idTask=e.idTask,t.quantityHours=e.quantityHours,t.quantityMinutes=e.quantityMinutes,t.date=e.date,t.loadingDate=e.loadingDate,a.push(t)})),a.sort((function(e,t){return e.date<t.date?1:-1})),e.setState({isLoading:!1,lstHours:a})}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{children:Object(w.jsxs)(b.a,{children:[Object(w.jsxs)(O.a,{tag:"h2",style:{display:"flex"},children:[Object(w.jsx)(h.a,{xl:10,style:{paddingLeft:"12%"},children:"Horas Cargadas"}),Object(w.jsx)(h.a,{xl:2,children:Object(w.jsx)(_,{file:this.props.file,onReload:this.onReloadGrid})})]}),Object(w.jsx)(p.a,{children:Object(w.jsx)(x.a,{children:this.state.isLoading?Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})}):this.state.lstHours.length?Object(w.jsxs)(A.a,{striped:!0,hover:!0,size:"sm",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Proyecto"}),Object(w.jsx)("th",{children:"Tarea"}),Object(w.jsx)("th",{children:"Fecha"}),Object(w.jsx)("th",{children:"Horas"}),Object(w.jsx)("th",{children:"Minutos"}),Object(w.jsx)("th",{children:"Modificar"}),Object(w.jsx)("th",{children:"Eliminar"})]})}),Object(w.jsx)("tbody",{children:this.state.lstHours.map((function(t){return Object(w.jsx)(G,{hours:t,onReload:e.onReloadGrid},t.id)}))})]}):Object(w.jsx)("h4",{children:"El recurso no posee horas cargadas."})})})]})})}}]),a}(s.Component),K=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={resource:{},isLoading:!0,lstHours:[]},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;fetch("https://squad6-backend.herokuapp.com/resources/".concat(t)).then((function(e){return e.json()})).then((function(t){e.setState({isLoading:!1,resource:t})}),(function(e){console.log(e)}))}},{key:"render",value:function(){return Object(w.jsxs)("div",{style:{padding:"10px"},children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:12,lg:12,children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/",children:"Home"})}),Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/recursos",children:"Recursos"})}),Object(w.jsxs)(u.a,{active:!0,children:[this.state.resource.Nombre," ",this.state.resource.Apellido]})]})})}),Object(w.jsxs)(l.a,{children:[Object(w.jsx)(h.a,{xl:4,lg:4,children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(O.a,{tag:"h4",children:"Datos Principales"}),Object(w.jsx)(p.a,{children:Object(w.jsx)(x.a,{children:this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsxs)(l.a,{children:[Object(w.jsxs)(h.a,{xl:4,lg:4,children:[Object(w.jsx)(m.a,{tag:"h6",children:"Legajo"}),Object(w.jsx)(g.a,{children:this.state.resource.legajo})]}),Object(w.jsxs)(h.a,{xl:4,lg:4,children:[Object(w.jsx)(m.a,{tag:"h6",children:"Nombre"}),Object(w.jsx)(g.a,{children:this.state.resource.Nombre})]}),Object(w.jsxs)(h.a,{xl:4,lg:4,children:[Object(w.jsx)(m.a,{tag:"h6",children:"Apellido"}),Object(w.jsx)(g.a,{children:this.state.resource.Apellido})]})]})})})]})}),Object(w.jsx)(h.a,{xl:8,lg:8,children:Object(w.jsx)(J,{file:this.props.match.params.id})})]})]})}}]),a}(s.Component),X=a(356),U=(a(333),a(13)),Q=(a(130),function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={modalHeader:null,modalBody:null,modalOnClose:null,modal:!1,modalTotal:!1},e}return Object(r.a)(a,[{key:"crearProyecto",value:function(){var e=document.getElementById("nombreProyecto").value,t=document.getElementById("fechaInicio").value,a=document.getElementById("descripcion").value,s=document.getElementById("fechaFin").value,i=document.getElementById("horas").value,c=document.getElementById("presupuesto").value;if(this.validateRequiredEntries(e,t,a)&&!(""!=s&&t>s)){var n=this.obtenerEstado(),r={nombre:e,fechaInicio:t,fechaFin:""==s?void 0:s,estado:null==n?void 0:n,horas:""==i?void 0:parseInt(i),presupuesto:""==c?void 0:parseInt(c),descripcion:a},o=this;fetch("https://proyectopsa.herokuapp.com/proyectos/",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.codigo?(o.setState({modalTotal:!1}),o.props.onClose(),o.abrirModal("\xc9XITO","El proyecto se gener\xf3 exitosamente con c\xf3digo: ".concat(e.codigo),(function(){}))):o.abrirModal("ERROR",e.description+e.validation,(function(){}))})).catch((function(e){o.abrirModal("ERROR",e.message,(function(){}))}))}}},{key:"abrirModal",value:function(e,t,a){this.setState({modalHeader:e,modalBody:t,modalOnClose:a,modal:!0})}},{key:"obtenerEstado",value:function(){return document.getElementById("iniciado").checked?"iniciado":document.getElementById("enProceso").checked?"en proceso":document.getElementById("finalizado").checked?"finalizado":void 0}},{key:"validateRequiredEntries",value:function(e,t,a){var s=!0,i=document.getElementById("nombre").classList,c=document.getElementById("startDate").classList,n=document.getElementById("desc").classList;return s&=this.validate(e,i),s&=this.validate(t,c),s&=this.validate(a,n)}},{key:"validate",value:function(e,t){var a=!0;return""==e?(t.add("incorrect"),a=!1):t.remove("incorrect"),a}},{key:"render",value:function(){var e=this,t=this,a=function(){return t.setState({modalTotal:!t.state.modalTotal})},s=function(){return t.setState({modal:!t.state.modal})};return Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{color:"secondary",onClick:a,children:"Agregar Proyecto"}),Object(w.jsxs)(C.a,{isOpen:this.state.modalTotal,toggle:a,children:[Object(w.jsx)(S.a,{id:"header",toggle:a,children:"Nuevo Proyecto"}),Object(w.jsxs)(M.a,{children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"nombreProyecto",id:"nombre",children:"Nombre Proyecto *"}),Object(w.jsx)(E.a,{type:"string",name:"nombreProyecto",id:"nombreProyecto",className:"general",maxLength:"256",required:!0})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"fechaInicio",id:"startDate",children:"Fecha Inicio *"}),Object(w.jsx)(E.a,{type:"date",name:"fechaInicio",id:"fechaInicio",className:"general fecha",required:!0})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"fechaFin",children:"Fecha Fin"}),Object(w.jsx)(E.a,{type:"date",name:"fechaFin",id:"fechaFin",className:"general fecha"})]}),Object(w.jsxs)(P.a,{tag:"fieldset",children:[Object(w.jsx)(N.a,{className:"parametro",children:"Estado"}),Object(w.jsxs)(P.a,{check:!0,children:[Object(w.jsxs)(N.a,{check:!0,className:"radio",children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"iniciado"})," ","Iniciado"]}),Object(w.jsxs)(N.a,{check:!0,className:"radio",children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"enProceso"})," ","En Proceso"]}),Object(w.jsxs)(N.a,{check:!0,className:"radio",children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"finalizado"})," ","Finalizado"]})]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"horas",children:"Horas"}),Object(w.jsx)(E.a,{type:"number",name:"horas",id:"horas",className:"general",min:0})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"presupuesto",children:"Presupuesto"}),Object(w.jsx)(E.a,{type:"number",name:"presupuesto",id:"presupuesto",className:"general",min:0})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"descripcion",id:"desc",children:"Descripci\xf3n *"}),Object(w.jsx)(E.a,{type:"textarea",name:"descripcion",id:"descripcion",className:"general",maxLength:"256",required:!0})]}),Object(w.jsx)(T.a,{onClick:function(){return e.crearProyecto()},children:"Crear Proyecto"}),Object(w.jsx)("label",{id:"requisitosLabel",children:"(*) para aquellos campos que sean requeridos obligatoriamente"})]})]}),Object(w.jsxs)(C.a,{isOpen:this.state.modal,toggle:s,className:"popupError",onClosed:this.state.modalOnClose,children:[Object(w.jsx)(S.a,{toggle:s,children:this.state.modalHeader}),Object(w.jsx)(M.a,{children:this.state.modalBody})]})]})}}]),a}(s.Component)),Y=Object(U.g)(Q),Z=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={projects:[],isLoading:!0},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loadProyectos()}},{key:"loadProyectos",value:function(){var e=this;fetch("https://proyectopsa.herokuapp.com/proyectos/").then((function(e){return e.json()})).then((function(t){e.setState({projects:t,isLoading:!1})}),(function(e){console.log(e)}))}},{key:"getBadgeColor",value:function(e){switch(e){case"Iniciado":return"danger";case"Finalizado":return"success";case"En proceso":return"warning"}}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:12,lg:12,children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/",children:"Home"})}),Object(w.jsx)(u.a,{active:!0,children:"Proyectos"})]})})}),Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:{size:6,offset:3},children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(O.a,{tag:"h2",children:"Proyectos"}),Object(w.jsx)(p.a,{children:Object(w.jsx)(x.a,{children:this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(A.a,{striped:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Nombre"}),Object(w.jsx)("th",{children:"Estado"}),Object(w.jsx)("th",{children:Object(w.jsx)(Y,{onClose:function(){return e.loadProyectos()}})})]})}),Object(w.jsx)("tbody",{children:this.state.projects.map((function(t){var a=t.estado.charAt(0).toUpperCase()+t.estado.slice(1),s=e.getBadgeColor(a);return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t.nombre}),Object(w.jsx)("td",{children:Object(w.jsx)(X.a,{color:s,children:a})}),Object(w.jsx)("td",{children:Object(w.jsx)(V.b,{to:"/proyectos/".concat(t.codigo,"/tareas"),children:Object(w.jsx)(T.a,{color:"info",children:"Ver Tareas"})})})]},t.legajo)}))})]})})})})})]})})})]})}}]),a}(s.Component),$=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isLoading:!0,lstResources:[]},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/resources").then((function(e){return e.json()})).then((function(t){e.setState({isLoading:!1,lstResources:t})}),(function(e){console.log(e)}))}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"block",style:{padding:"10px"},children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:12,lg:12,children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/",children:"Home"})}),Object(w.jsx)(u.a,{active:!0,children:"Recursos"})]})})}),Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:{size:6,offset:3},children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(O.a,{tag:"h2",children:"Recursos"}),Object(w.jsx)(p.a,{children:Object(w.jsx)(x.a,{children:this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(A.a,{striped:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Legajo"}),Object(w.jsx)("th",{children:"Nombre"}),Object(w.jsx)("th",{children:"Apellido"}),Object(w.jsx)("th",{children:"Seleccionar"})]})}),Object(w.jsx)("tbody",{children:this.state.lstResources.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.legajo}),Object(w.jsx)("td",{children:e.Nombre}),Object(w.jsx)("td",{children:e.Apellido}),Object(w.jsx)("td",{children:Object(w.jsx)(V.b,{to:"/cargadehoras/".concat(e.legajo),children:Object(w.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",children:"Ver recurso"})})})]},e.legajo)}))})]})})})})})]})})})]})}}]),a}(s.Component),ee=a(133),te=a(357),ae=(a(334),function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isLoading:!0,lstResources:[]},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/resources").then((function(e){return e.json()})).then((function(t){e.setState({isLoading:!1,lstResources:t})}),(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(A.a,{striped:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Legajo"}),Object(w.jsx)("th",{children:"Nombre"}),Object(w.jsx)("th",{children:"Apellido"}),Object(w.jsx)("th",{children:"Seleccionar"})]})}),Object(w.jsx)("tbody",{children:this.state.lstResources.map((function(t){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:t.legajo}),Object(w.jsx)("td",{children:t.Nombre}),Object(w.jsx)("td",{children:t.Apellido}),Object(w.jsx)("td",{children:Object(w.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:function(){return e.props.onClick(t.legajo)},children:"Seleccionar recurso"})})]},t.legajo)}))})]})})})}}]),a}(s.Component)),se=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={tarea:[],modal:!1,errorModal:!1,modalBody:null,modalHeader:null,acceptModalButton:null,errorMessage:"",prioridad:"",estado:"",codigoRecurso:"",fechaFin:"",recurso:null},e}return Object(r.a)(a,[{key:"asignarRecurso",value:function(){var e=this,t=this,a=Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{children:Object(w.jsx)(P.a,{children:Object(w.jsx)(ae,{onClick:function(a){t.validateInputText(a,"codigoRecursoLabel")&&(t.patch({codigoRecurso:a}).then((function(e){return t.obtenerTareas()})),e.setState({modal:!1}))}})})})});this.abrirModal("Asignar Recurso",a,null)}},{key:"modificarPrioridad",value:function(){var e=this,t=Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{children:Object(w.jsxs)(P.a,{tag:"fieldset",children:[Object(w.jsx)(N.a,{className:"parametro",id:"priorityLabel",children:"Prioridad"}),Object(w.jsx)(P.a,{check:!0,children:Object(w.jsxs)(N.a,{check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio2",id:"bajaTarea"})," ","Baja"]})}),Object(w.jsx)(P.a,{check:!0,children:Object(w.jsxs)(N.a,{check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio2",id:"mediaTarea"})," ","Media"]})}),Object(w.jsx)(P.a,{check:!0,children:Object(w.jsxs)(N.a,{check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio2",id:"altaTarea"})," ","Alta"]})})]})})});this.abrirModal("Modificar Prioridad",t,(function(){if(e.validarRadio(["bajaTarea","mediaTarea","altaTarea"],"priorityLabel")){var t=e.obtenerRadio("bajaTarea","mediaTarea","altaTarea","baja","media","alta");e.patch({prioridad:t}),e.setState({modal:!1})}}))}},{key:"modificarFechaFinal",value:function(){var e=this,t=Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{children:Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{for:"fechaFinal",id:"fechaFinalLabel",children:"Fecha Fin:"}),Object(w.jsx)(E.a,{type:"date",name:"fechaFinal",id:"fechaFinal"})]})})});this.abrirModal("Modificar Fecha Final",t,(function(){var t=document.getElementById("fechaFinal").value;e.validateInputText(t,"fechaFinalLabel")&&(e.patch({fechaFin:t}),e.setState({modal:!1}))}))}},{key:"modificarEstado",value:function(){var e=this,t=Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{children:Object(w.jsxs)(P.a,{tag:"fieldset",children:[Object(w.jsx)(N.a,{id:"estadoLabel",children:"Estado"}),Object(w.jsx)(P.a,{check:!0,children:Object(w.jsxs)(N.a,{check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"iniciadoTarea"})," ","Iniciado"]})}),Object(w.jsx)(P.a,{check:!0,children:Object(w.jsxs)(N.a,{check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"enProcesoTarea"})," ","En Proceso"]})}),Object(w.jsx)(P.a,{check:!0,children:Object(w.jsxs)(N.a,{check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"finalizadoTarea"})," ","Finalizado"]})})]})})});this.abrirModal("Modificar Estado",t,(function(){if(e.validarRadio(["iniciadoTarea","enProcesoTarea","finalizadoTarea"],"estadoLabel")){var t=e.obtenerRadio("iniciadoTarea","enProcesoTarea","finalizadoTarea","iniciado","en proceso","finalizado");e.patch({estado:t}),e.setState({modal:!1})}}))}},{key:"patch",value:function(e,t){null==t&&(t="https://proyectopsa.herokuapp.com/proyectos/".concat(this.state.tarea.proyectoID,"/tarea/").concat(this.state.tarea.codigo));var a=this;return fetch(t,{method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(t){t.codigo?a.setState(e):a.setState({errorMessage:t.descripcion+t.validation,errorModal:!0})})).catch((function(e){a.setState({errorMessage:e.message,errorModal:!0}),console.log(e)}))}},{key:"obtenerRadio",value:function(e,t,a,s,i,c){return document.getElementById(e).checked?s:document.getElementById(t).checked?i:document.getElementById(a).checked?c:void 0}},{key:"validarRadio",value:function(e,t){var a=document.getElementById(t).classList,s=document.getElementById(e[0]),i=document.getElementById(e[1]),c=document.getElementById(e[2]);return s.checked||i.checked||c.checked?(a.remove("incorrect"),!0):(a.add("incorrect"),!1)}},{key:"validateInputText",value:function(e,t){return null!=e&&""!=e||(document.getElementById(t).classList.add("incorrect"),!1)}},{key:"abrirModal",value:function(e,t,a){this.setState({modalHeader:e,modalBody:t,acceptModalButton:a,modal:!0})}},{key:"componentDidMount",value:function(){this.tareaID=this.props.match.params.idtarea,this.proyectoID=this.props.match.params.id,this.obtenerTareas()}},{key:"obtenerRecursosPorTarea",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/hours").then((function(e){return e.json()})).then((function(t){e.obtenerHorasDeTarea(t)}))}},{key:"obtenerHorasDeTarea",value:function(e){var t=this,a=function(a){e[a].idProject==t.proyectoID&&e[a].idTask==t.tareaID&&fetch("https://squad6-backend.herokuapp.com/resources/".concat(e[a].file)).then((function(e){return e.json()})).then((function(s){t.setState({recursosXhoras:[].concat(Object(ee.a)(t.state.recursosXhoras),[{nombre:s.Nombre+" "+s.Apellido,codigo:e[a].file,horas:e[a].quantityHours+(0==e[a].quantityMinutes?"":":"+e[a].quantityMinutes)}])})}))};for(var s in e)a(s)}},{key:"obtenerTareas",value:function(){var e=this,t=this;fetch("https://proyectopsa.herokuapp.com/proyectos/".concat(this.proyectoID,"/tarea/").concat(this.tareaID)).then((function(e){return e.json()})).then((function(a){var s=a.tarea;e.setState({tarea:s,prioridad:s.prioridad,estado:s.estado,fechaFin:s.fechaFin,codigoRecurso:s.codigoRecurso}),s.codigoRecurso&&fetch("https://squad6-backend.herokuapp.com/resources/".concat(s.codigoRecurso)).then((function(e){return e.json()})).then((function(e){t.setState({recurso:e})}),(function(e){console.log(e)}))}),(function(e){console.log(e)}))}},{key:"noResources",value:function(){if(!this.state.codigoRecurso)return Object(w.jsx)("div",{id:"sinAsignados",children:"No hay recursos asignados a esta tarea."})}},{key:"showResources",value:function(){return this.state.codigoRecurso&&this.state.recurso&&Object(w.jsx)("div",{className:"recursosHoras",children:Object(w.jsxs)("p",{id:"codigoRecursoCard",children:[Object(w.jsx)("b",{children:"C\xf3digo Recurso:"})," ",this.state.recurso.legajo,"\xa0\xa0\xa0\xa0",Object(w.jsx)("b",{children:"Nombre Recurso:"})," ",this.state.recurso.Nombre+" "+this.state.recurso.Apellido,"\xa0\xa0\xa0\xa0"]})})}},{key:"eliminarTarea",value:function(){var e=this,t=Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:"Tenga en cuenta que se eliminaran todas las horas asignadas a esta tarea."}),Object(w.jsxs)("div",{id:"confirmButtons",children:[Object(w.jsx)(T.a,{className:"botoneh",onClick:function(){e.selfDelete()},children:"Confirmar"}),Object(w.jsx)(T.a,{className:"botoneh",onClick:function(){return e.setState({modal:!1})},children:"Cancelar"})]})]});this.abrirModal("Esta seguro que desea eliminar esta tarea?",t,null)}},{key:"selfDelete",value:function(){var e=this,t=this,a="https://proyectopsa.herokuapp.com/proyectos/".concat(this.state.tarea.codigoProyecto,"/tarea/").concat(this.state.tarea.codigo);fetch(a,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(a){t.props.history.push("/proyectos/".concat(e.state.tarea.codigoProyecto,"/tareas"))}))}},{key:"deleteHora",value:function(e){console.log(e);var t="https://squad6-backend.herokuapp.com/hours/".concat(e.id);fetch(t,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"}})}},{key:"deleteHorasRecurso",value:function(){var e=this,t=[];return fetch("https://squad6-backend.herokuapp.com/hours").then((function(e){return e.json()})).then((function(a){for(var s in a){var i=a[s];!i.file!=e.state.codigoRecurso&&(i.idProject==e.state.tarea.codigoProyecto&&i.idTask==e.state.tarea.codigo&&t.push(i))}}),(function(e){console.log(e)})).then((function(a){for(var s=0;s<t.length;s++)e.deleteHora(t[s])})),t}},{key:"editarNombreODescripcion",value:function(){var e=this,t=Object(w.jsx)("div",{children:Object(w.jsxs)(te.a,{children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{for:"nombreTarea",children:"Nombre Tarea:"}),Object(w.jsx)(E.a,{type:"string",name:"nombreTarea",id:"nombreTareaPatch",defaultValue:e.state.tarea.nombre})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{for:"descripcion",children:"Descripci\xf3n:"}),Object(w.jsx)(E.a,{type:"textarea",name:"descripcion",id:"descripcionTareaPatch",className:"general",defaultValue:e.state.tarea.descripcion})]})]})});this.abrirModal("Editar Atributos Generales",t,(function(){var t=document.getElementById("descripcionTareaPatch").value,a=document.getElementById("nombreTareaPatch").value;e.patch({nombre:a,descripcion:t}),setTimeout((function(){e.obtenerTareas(),e.obtenerRecursosPorTarea()}),1e3),e.setState({modal:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.tarea,a=this,s=function(){return a.setState({modal:!a.state.modal})},i=Object(w.jsx)(T.a,{id:"closebtn",onClick:function(){return a.setState({errorModal:!1})},children:" X "});return Object(w.jsxs)("div",{id:"paginaTareas",children:[Object(w.jsxs)(j.a,{children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/",children:"Home"})}),Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/proyectos/",children:"Proyectos"})}),Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/proyectos/".concat(t.codigoProyecto,"/tareas/"),children:"Tareas"})}),Object(w.jsxs)(u.a,{children:["Tarea ",t.codigo]})]}),Object(w.jsxs)("div",{id:"subheaderTarea",children:[Object(w.jsx)("br",{}),Object(w.jsx)("h1",{id:"taskName",children:this.state.tarea.nombre})]}),Object(w.jsxs)("div",{id:"cardsContainer",children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{sm:"6",children:Object(w.jsx)("div",{id:"cardGeneral",className:"card",children:Object(w.jsxs)(b.a,{body:!0,children:[Object(w.jsx)(m.a,{className:"cardTitle",tag:"h5",children:"General"}),Object(w.jsxs)(g.a,{children:[Object(w.jsx)("b",{children:"Descripci\xf3n:"})," ",this.state.tarea.descripcion]}),Object(w.jsxs)("div",{id:"infoCodigos",children:[Object(w.jsxs)("p",{className:"cardText",children:[Object(w.jsx)("b",{children:"C\xf3digo Tarea:"})," ",t.codigo,"."]}),Object(w.jsxs)("p",{className:"cardText",children:[Object(w.jsx)("b",{children:"C\xf3digo Proyecto:"})," ",t.codigoProyecto,"."]}),Object(w.jsxs)("p",{className:"cardText",children:[Object(w.jsx)("b",{children:"Nombre Proyecto:"})," ",t.nombreProyecto]})]}),Object(w.jsx)(T.a,{color:"secondary",onClick:function(){return e.editarNombreODescripcion()},children:"Editar"})]})})})}),Object(w.jsxs)(l.a,{children:[Object(w.jsx)(h.a,{sm:"6",children:Object(w.jsx)("div",{id:"cardRecursos",className:"card cardsLeft cardsTop",children:Object(w.jsxs)(b.a,{body:!0,children:[Object(w.jsx)(m.a,{className:"cardTitle",tag:"h5",children:"Recursos asignados"}),Object(w.jsxs)("div",{id:"recursosConHoras",children:[this.noResources(),this.showResources()]}),Object(w.jsx)(T.a,{id:"recursosButton",onClick:function(){return e.asignarRecurso()},children:"Asignar Recurso"})]})})}),Object(w.jsx)(h.a,{sm:"6",children:Object(w.jsx)("div",{id:"cardFechas",className:"card cardsRight cardsTop",children:Object(w.jsxs)(b.a,{body:!0,children:[Object(w.jsx)(m.a,{tag:"h5",className:"cardTitle",children:"Fechas"}),Object(w.jsxs)("div",{id:"fechasTareas",children:[Object(w.jsxs)(g.a,{children:[Object(w.jsx)("b",{children:"Fecha Inicial:"})," ",t.fechaInicio]}),Object(w.jsxs)(g.a,{children:[Object(w.jsx)("b",{children:"Fecha Final:"})," ",null==this.state.fechaFin?"No hay fecha final":this.state.fechaFin]})]}),Object(w.jsx)(T.a,{id:"fechaButton",onClick:function(){return e.modificarFechaFinal()},children:"Modificar Fecha Final "})]})})}),Object(w.jsx)(h.a,{sm:"6",children:Object(w.jsx)("div",{id:"cardEstado",className:"card cardsLeft",children:Object(w.jsxs)(b.a,{body:!0,children:[Object(w.jsx)(m.a,{className:"cardTitle",tag:"h5",children:"Estado"}),Object(w.jsx)(g.a,{className:this.state.estado,children:this.state.estado}),Object(w.jsx)(T.a,{onClick:function(){return e.modificarEstado()},children:"Modificar Estado"})]})})}),Object(w.jsx)(h.a,{sm:"6",children:Object(w.jsx)("div",{id:"cardPrioridad",className:"card cardsRight",children:Object(w.jsxs)(b.a,{body:!0,children:[Object(w.jsx)(m.a,{className:"cardTitle",tag:"h5",children:"Prioridad"}),Object(w.jsx)(g.a,{className:this.state.prioridad+" prioridadValue",children:this.state.prioridad}),Object(w.jsx)(T.a,{onClick:function(){return e.modificarPrioridad()},children:"Modificar Prioridad "})]})})})]})]}),Object(w.jsxs)("div",{id:"modals",children:[Object(w.jsxs)(C.a,{isOpen:this.state.modal,toggle:s,children:[Object(w.jsx)(S.a,{toggle:s,children:this.state.modalHeader}),Object(w.jsx)(M.a,{children:this.state.modalBody}),this.state.acceptModalButton&&Object(w.jsx)(T.a,{onClick:this.state.acceptModalButton,id:"boton",children:"Aceptar"})]}),Object(w.jsxs)(C.a,{isOpen:this.state.errorModal,toggle:function(){return a.setState({errorModal:!a.state.errorModal})},children:[Object(w.jsx)(S.a,{toggle:s,close:i,children:"ERROR"}),Object(w.jsx)(M.a,{children:this.state.errorMessage}),Object(w.jsx)(T.a,{onClick:function(){return a.setState({errorModal:!1})},id:"boton",children:"Cancelar"})]})]}),Object(w.jsx)(T.a,{color:"danger",onClick:function(){return e.eliminarTarea()},className:"eliminar",children:"Eliminar Tarea"})]})}}]),a}(s.Component),ie=Object(U.g)(se),ce=a(358),ne=(a(76),function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isShow:!1,resources:[{}],description:"",type:"consulta",priority:1,resource_id:null,name:""},s.saveTicket=s.saveTicket.bind(Object(k.a)(s)),s.changeVisibility=s.changeVisibility.bind(Object(k.a)(s)),s.saveTicketWithEnter=s.saveTicketWithEnter.bind(Object(k.a)(s)),s.handleTypeChange=s.handleTypeChange.bind(Object(k.a)(s)),s.handlePriorityChange=s.handlePriorityChange.bind(Object(k.a)(s)),s.handleDescriptionChange=s.handleDescriptionChange.bind(Object(k.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(k.a)(s)),s.handleResourceChange=s.handleResourceChange.bind(Object(k.a)(s)),s.handleNameChange=s.handleNameChange.bind(Object(k.a)(s)),s}return Object(r.a)(a,[{key:"changeVisibility",value:function(){this.setState({isShow:!this.state.isShow})}},{key:"saveTicketWithEnter",value:function(e){"Enter"===e.key&&this.changeVisibility()}},{key:"saveTicket",value:function(){this.changeVisibility();var e={type:this.state.type,description:this.state.description,priority:this.state.priority,resource_id:this.state.resource_id,name:this.state.name,id:Math.floor(10001*Math.random())+0};""==e.description||""==e.name?L.a.fire({title:"Debe ingresar nombre y descripcion",icon:"warning"}):(fetch("https://aninfo-soporte.herokuapp.com/create_ticket",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"cors"}),L.a.fire({title:"ticket creado correctamente",icon:"success"}))}},{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value}),console.log(e.target.value)}},{key:"handlePriorityChange",value:function(e){this.setState({priority:e.target.value}),console.log(e.target.value)}},{key:"handleDescriptionChange",value:function(e){this.setState({description:e.target.value}),console.log(e.target.value)}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value}),console.log(e.target.value)}},{key:"handleResourceChange",value:function(e){this.setState({resource_id:e.target.value}),console.log(e.target.value)}},{key:"handleSubmit",value:function(e){}},{key:"componentDidMount",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/resources",{method:"GET"}).then((function(t){return t.json().then((function(t){e.setState({resources:t}),t.length>0&&(e.state.resource_id=t[0].legajo)}))}))}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{color:"primary",onClick:this.changeVisibility,children:"Crear Ticket"}),Object(w.jsxs)(C.a,{isOpen:this.state.isShow,toggle:this.changeVisibility,onKeyPress:this.saveTicketWithEnter,children:[Object(w.jsx)(S.a,{toggle:this.changeVisibility,children:"Crear Ticket"}),Object(w.jsxs)(M.a,{children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Nombre"}),Object(w.jsx)(E.a,{type:"text",value:this.state.name,onChange:this.handleNameChange})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Recurso"}),Object(w.jsxs)(E.a,{type:"select",onChange:this.handleResourceChange,children:[this.state.resources.map((function(e){return Object(w.jsxs)("option",{value:e.legajo,children:[e.Nombre," ",e.Apellido]},e.legajo)}))," "]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Tipo"}),Object(w.jsxs)(E.a,{type:"select",value:this.state.type,onChange:this.handleTypeChange,children:[Object(w.jsx)("option",{value:"consulta",children:"Consulta"}),Object(w.jsx)("option",{value:"error",children:"Error"})]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Descripcion"}),Object(w.jsx)(E.a,{type:"text",value:this.state.description,onChange:this.handleDescriptionChange})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Prioridad"}),Object(w.jsxs)(E.a,{type:"select",value:this.state.priority,onChange:this.handlePriorityChange,children:[Object(w.jsx)("option",{value:"1",children:"1"}),Object(w.jsx)("option",{value:"2",children:"2"}),Object(w.jsx)("option",{value:"3",children:"3"}),Object(w.jsx)("option",{value:"4",children:"4"})]})]}),Object(w.jsx)(P.a,{}),Object(w.jsx)(P.a,{check:!0,row:!0,children:Object(w.jsx)(h.a,{sm:{size:10,offset:9},children:Object(w.jsx)(T.a,{color:"primary",onClick:this.saveTicket,children:"Guardar"})})})]})]})]})}}]),a}(s.Component));var re=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={tickets:[]},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://aninfo-soporte.herokuapp.com/tickets_main_data",{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(t){return t.json().then((function(t){e.setState({tickets:t}),console.log(t)}))}))}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"paginaTickets",children:[Object(w.jsx)("div",{children:Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsx)(ce.a,{children:Object(w.jsx)(ne,{})})})})}),Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:{size:6,offset:3},children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(O.a,{tag:"h2",children:"Tickets disponibles"}),Object(w.jsx)(p.a,{children:Object(w.jsx)(x.a,{children:this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(A.a,{striped:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Nombre"}),Object(w.jsx)("th",{children:"Estado"}),Object(w.jsx)("th",{children:"Prioridad"}),Object(w.jsx)("th",{children:"Fecha limite"})]})}),Object(w.jsx)("tbody",{children:this.state.tickets.map((function(e){return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:e.name}),Object(w.jsx)("td",{children:e.status}),Object(w.jsx)("td",{children:e.priority}),Object(w.jsx)("td",{children:e["limit date"]}),Object(w.jsx)("td",{children:Object(w.jsx)(V.b,{to:"/soporte/ticket_detail/".concat(e.id),children:Object(w.jsx)("button",{type:"button",className:"btn btn-primary btn-sm",children:"Ver ticket"})})})]},e.name)}))})]})})})})})]})})})]})}}]),a}(s.Component),oe=a(44),de=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isShow:!1,ticket_original_data:e.data,resources:[{}]},s.saveTicket=s.saveTicket.bind(Object(k.a)(s)),s.changeVisibility=s.changeVisibility.bind(Object(k.a)(s)),s.saveTicketWithEnter=s.saveTicketWithEnter.bind(Object(k.a)(s)),s.handleTypeChange=s.handleTypeChange.bind(Object(k.a)(s)),s.handlePriorityChange=s.handlePriorityChange.bind(Object(k.a)(s)),s.handleNameChange=s.handleNameChange.bind(Object(k.a)(s)),s.handleDescriptionChange=s.handleDescriptionChange.bind(Object(k.a)(s)),s.handleStatusChange=s.handleStatusChange.bind(Object(k.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(k.a)(s)),s.handleResourceChange=s.handleResourceChange.bind(Object(k.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://squad6-backend.herokuapp.com/resources",{method:"GET"}).then((function(t){return t.json().then((function(t){return e.setState({resources:t})}))}));fetch("https://aninfo-soporte.herokuapp.com/tasks",{method:"GET"}).then((function(t){return t.json().then((function(t){e.setState({tasks:t}),t.length>0&&(e.state.task_id=t[0].codigo)}))}))}},{key:"changeVisibility",value:function(){this.setState({isShow:!this.state.isShow})}},{key:"saveTicketWithEnter",value:function(e){"Enter"===e.key&&this.changeVisibility()}},{key:"saveTicket",value:function(){this.changeVisibility();var e={ticket_id:this.state.id,name:this.state.name,description:this.state.description,priority:this.state.priority,status:this.state.status,resource_id:this.state.resource_id};""==e.description||""==e.name?L.a.fire({title:"Debe ingresar nombre y descripcion",icon:"warning"}):(fetch("https://aninfo-soporte.herokuapp.com/edit_ticket",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"cors"}),L.a.fire({title:"Se modific\xf3 el ticket correctamente",icon:"success"}))}},{key:"handleTypeChange",value:function(e){this.setState({type:e.target.value}),console.log(e.target.value)}},{key:"handleNameChange",value:function(e){this.setState({name:e.target.value}),console.log(e.target.value)}},{key:"handlePriorityChange",value:function(e){this.setState({priority:e.target.value}),console.log(e.target.value)}},{key:"handleDescriptionChange",value:function(e){this.setState({description:e.target.value}),console.log(e.target.value)}},{key:"handleStatusChange",value:function(e){this.setState({status:e.target.value}),console.log(e.target.value)}},{key:"handleResourceChange",value:function(e){this.setState({resource_id:e.target.value}),console.log(e.target.value)}},{key:"handleSubmit",value:function(e){}},{key:"render",value:function(){return Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{color:"primary",onClick:this.changeVisibility,children:"Editar Ticket"}),Object(w.jsxs)(C.a,{isOpen:this.state.isShow,toggle:this.changeVisibility,onKeyPress:this.saveTicketWithEnter,children:[Object(w.jsx)(S.a,{toggle:this.changeVisibility,children:"Editar Ticket"}),Object(w.jsxs)(M.a,{children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Nombre"}),Object(w.jsx)(E.a,{type:"text",value:this.state.name,onChange:this.handleNameChange})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Descripcion"}),Object(w.jsx)(E.a,{type:"text",value:this.state.description,onChange:this.handleDescriptionChange})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Prioridad "}),Object(w.jsxs)(E.a,{type:"select",value:this.state.priority,onChange:this.handlePriorityChange,children:[Object(w.jsx)("option",{value:"1",children:"1"}),Object(w.jsx)("option",{value:"2",children:"2"}),Object(w.jsx)("option",{value:"3",children:"3"}),Object(w.jsx)("option",{value:"4",children:"4"})]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Status "}),Object(w.jsxs)(E.a,{type:"select",value:this.state.status,onChange:this.handleStatusChange,children:[Object(w.jsx)("option",{value:"en progreso soporte",children:"en progreso soporte"}),Object(w.jsx)("option",{value:"escalado en ingeneria",children:"escalado en ingeneria"}),Object(w.jsx)("option",{value:"esperando respuesta del cliente",children:"esperando respuesta del cliente"}),Object(w.jsx)("option",{value:"resuelto",children:"resuelto"})]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{children:"Recurso"}),Object(w.jsxs)(E.a,{type:"select",value:this.state.resource_id,onChange:this.handleResourceChange,children:[this.state.resources.map((function(e){return Object(w.jsxs)("option",{value:e.legajo,children:[e.Nombre," ",e.Apellido]},e.legajo)})),"                                "]})]}),Object(w.jsx)(P.a,{check:!0,row:!0,children:Object(w.jsx)(h.a,{sm:{size:10,offset:9},children:Object(w.jsx)(T.a,{color:"primary",onClick:this.saveTicket,children:"Guardar"})})})]})]})]})}}]),a}(s.Component),le=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={isShow:!1,ticket_original_data:e.data,tasks:[{}],ticket_tasks:[{}]},s.saveTicket=s.saveTicket.bind(Object(k.a)(s)),s.changeVisibility=s.changeVisibility.bind(Object(k.a)(s)),s.saveTicketWithEnter=s.saveTicketWithEnter.bind(Object(k.a)(s)),s.handleTaskCheckboxChange=s.handleTaskCheckboxChange.bind(Object(k.a)(s)),s.isTaskChecked=s.isTaskChecked.bind(Object(k.a)(s)),s.getTasksToSave=s.getTasksToSave.bind(Object(k.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://aninfo-soporte.herokuapp.com/tasks",{method:"GET"}).then((function(t){return t.json().then((function(t){e.setState({tasks:t});for(var a=0;a<e.state.tasks.length;a++)e.state.tasks[a].checked=!1;var s=window.location.href.split("/");console.log(s);var i={ticket_id:s[s.length-1]};fetch("https://aninfo-soporte.herokuapp.com/tasks_by_id",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(t){return t.json().then((function(t){e.setState({ticket_tasks:t}),console.log(e.state),e.checkAssignedProjects()}))}))}))}))}},{key:"checkAssignedProjects",value:function(){for(var e=0;e<this.state.tasks.length;e++)for(var t=0;t<this.state.ticket_tasks.length;t++){if(this.state.tasks[e].codigo==this.state.ticket_tasks[t].task_id){this.state.tasks[e].checked=!0;break}this.state.tasks[e].checked=!1}}},{key:"changeVisibility",value:function(){this.setState({isShow:!this.state.isShow})}},{key:"saveTicketWithEnter",value:function(e){"Enter"===e.key&&this.changeVisibility()}},{key:"handleTaskCheckboxChange",value:function(e){console.log(e.target.value);for(var t=0;t<this.state.tasks.length;t++){if(this.state.tasks[t].codigo==e.target.value)this.state.tasks[t].checked?this.state.tasks[t].checked=!1:this.state.tasks[t].checked=!0}}},{key:"isTaskChecked",value:function(e){return 1==this.state.tasks[e].checked}},{key:"getTasksToSave",value:function(){for(var e=[],t=0;t<this.state.tasks.length;t++)1==this.state.tasks[t].checked&&e.push({task_id:this.state.tasks[t].codigo,task_name:this.state.tasks[t].nombre});return e}},{key:"saveTicket",value:function(){this.changeVisibility();var e={ticket_id:this.state.id,tasks:this.getTasksToSave()};console.log(e),fetch("https://aninfo-soporte.herokuapp.com/edit_tasks_ticket",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"},mode:"cors"}),L.a.fire({title:"Tareas asignadas al ticket correctamente",icon:"success"})}},{key:"handleSubmit",value:function(e){}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{color:"primary",onClick:this.changeVisibility,children:"Editar tareas asignadas"}),Object(w.jsxs)(C.a,{isOpen:this.state.isShow,toggle:this.changeVisibility,onKeyPress:this.saveTicketWithEnter,children:[Object(w.jsx)(S.a,{toggle:this.changeVisibility,children:"Editar tareas asignadas"}),Object(w.jsx)(M.a,{children:Object(w.jsx)(P.a,{children:this.state.tasks.map((function(t){return Object(w.jsxs)("li",{children:[Object(w.jsx)("input",{onClick:e.handleTaskCheckboxChange,type:"checkbox",defaultChecked:t.checked,ref:function(t){return e.modal_tasks=t},value:t.codigo},t.codigo)," ",t.nombre]})}))})}),Object(w.jsx)(P.a,{check:!0,row:!0,children:Object(w.jsx)(h.a,{sm:{size:10,offset:9},children:Object(w.jsx)(T.a,{color:"primary",onClick:this.saveTicket,children:"Guardar"})})})]})]})}}]),a}(s.Component),he=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={editable:!1},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=window.location.href.split("/"),a=t[t.length-1],s={ticket_id:a};fetch("https://aninfo-soporte.herokuapp.com/tasks_by_id",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(t){return t.json().then((function(t){e.setState({tasks:t})}))}));s={ticket_id:a};fetch("https://aninfo-soporte.herokuapp.com/ticket_data",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"},mode:"cors"}).then((function(t){return t.json().then((function(t){e.setState({id:t.id,name:t.name,description:t.description,status:t.status,priority:t.priority,type:t.type,creation_date:t["creation date"],limit_date:t["limit date"],resource_id:t["resource id"],resource_name:t["resource name"]}),"resuelto"!==t.status?(e.setState(Object(oe.a)(Object(oe.a)({},e.state),{},{editable:!0})),console.log(e.state.editable),e.modal_edit.setState({id:t.id,name:t.name,description:t.description,status:t.status,priority:t.priority,type:t.type,creation_date:t["creation date"],limit_date:t["limit date"],resource_id:t["resource id"],resource_name:t["resource name"]}),e.modal_tasks.setState({id:t.id,name:t.name,description:t.description,status:t.status,priority:t.priority,type:t.type,creation_date:t["creation date"],limit_date:t["limit date"],resource_id:t["resource id"],resource_name:t["resource name"]})):(e.setState(Object(oe.a)(Object(oe.a)({},e.state),{},{editable:!1})),console.log(e.state.editable))}))}))}},{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{children:Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:{size:6,offset:3},children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(O.a,{tag:"h2",children:"Detalle de ticket"}),Object(w.jsx)(p.a,{children:Object(w.jsxs)(x.a,{children:[this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(A.a,{striped:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Estado"}),Object(w.jsx)("th",{children:"Prioridad"}),Object(w.jsx)("th",{children:"Descripcion"}),Object(w.jsx)("th",{children:"Tipo"}),Object(w.jsx)("th",{children:"Recurso trabajando"}),Object(w.jsx)("th",{children:"Fecha Creacion"}),Object(w.jsx)("th",{children:"Fecha Limite"})]})}),Object(w.jsx)("tbody",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:this.state.status}),Object(w.jsx)("td",{children:this.state.priority}),Object(w.jsx)("td",{children:this.state.description}),Object(w.jsx)("td",{children:this.state.type}),Object(w.jsx)("td",{children:this.state.resource_name}),Object(w.jsx)("td",{children:this.state.creation_date}),Object(w.jsx)("td",{children:this.state.limit_date})]})})]})})}),Object(w.jsx)(l.a,{children:this.state.editable&&Object(w.jsxs)(l.a,{children:[Object(w.jsx)(h.a,{xs:"6",children:Object(w.jsx)(ce.a,{children:Object(w.jsx)(de,{data:this.state,ref:function(t){return e.modal_edit=t}})})}),Object(w.jsx)(h.a,{xs:"auto",children:Object(w.jsx)(ce.a,{children:Object(w.jsx)(le,{data:this.state,ref:function(t){return e.modal_tasks=t}})})})]})})]})})]})})})})}}]),a}(s.Component),je=(a(335),{backgroundColor:"#343a40",borderColor:"rgb(112 170 255)"}),ue=function(){return Object(w.jsx)("header",{children:Object(w.jsx)("nav",{children:Object(w.jsxs)("div",{id:"container",children:[Object(w.jsx)("br",{}),Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(V.b,{to:"/proyectos",children:Object(w.jsx)(b.a,{body:!0,inverse:!0,style:je,children:Object(w.jsx)(m.a,{tag:"h5",children:"Proyectos"})})})}),Object(w.jsx)("br",{}),Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(V.b,{to:"/recursos",children:Object(w.jsx)(b.a,{body:!0,inverse:!0,style:je,children:Object(w.jsx)(m.a,{tag:"h5",children:"Recursos"})})})}),Object(w.jsx)("br",{}),Object(w.jsx)("div",{className:"button",children:Object(w.jsx)(V.b,{to:"/soporte",children:Object(w.jsx)(b.a,{body:!0,inverse:!0,style:je,children:Object(w.jsx)(m.a,{tag:"h5",children:"Soporte"})})})})]})})})},be=(a(336),function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={modalHeader:null,modalBody:null,modalOnClose:null,modal:!1,modalTotal:!1},e.codigoRecurso="",e}return Object(r.a)(a,[{key:"crearTarea",value:function(){var e="https://proyectopsa.herokuapp.com/proyectos/".concat(this.id,"/tarea/"),t=document.getElementById("nombreTarea").value,a=document.getElementById("fechaInicio").value,s=document.getElementById("descripcion").value,i=document.getElementById("fechaFin").value,c=this.obtenerRadio("baja","media","alta");if(this.validateRequiredEntries(t,a,c)&&!(""!=i&&a>i)){var n=this.obtenerRadio("iniciado","enProceso","finalizado","en proceso"),r={nombre:t,fechaInicio:a,prioridad:c,fechaFin:""==i?void 0:i,estado:null==n?void 0:n,descripcion:s,codigoRecurso:""==this.codigoRecurso?void 0:this.codigoRecurso},o=this;fetch(e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.codigo?(o.setState({modalTotal:!1}),o.props.onClose(),o.abrirModal("\xc9XITO","La tarea se gener\xf3 exitosamente con c\xf3digo: ".concat(e.codigo),(function(){return o.props.history.push("/proyectos/".concat(o.id,"/tareas"))}))):o.abrirModal("ERROR DE LA REQUEST",e.description+e.validation,(function(){}))})).catch((function(e){o.abrirModal("ERROR DEL FETCH",e.message)}))}}},{key:"asignarRecurso",value:function(){var e=this,t=this,a=Object(w.jsx)("div",{children:Object(w.jsx)(te.a,{children:Object(w.jsx)(P.a,{children:Object(w.jsx)(ae,{onClick:function(a){t.codigoRecurso=a,e.setState({modal:!1})}})})})});this.abrirModal("Asignar Recurso",a,(function(){}))}},{key:"componentDidMount",value:function(){this.id=this.props.match.params.id}},{key:"abrirModal",value:function(e,t,a){this.setState({modalHeader:e,modalBody:t,modalOnClose:a,modal:!0})}},{key:"obtenerRadio",value:function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return document.getElementById(e).checked?e:document.getElementById(t).checked?null==s?t:s:document.getElementById(a).checked?a:void 0}},{key:"obtenerEstado",value:function(){return document.getElementById("iniciado").checked?"iniciado":document.getElementById("enProceso").checked?"en proceso":document.getElementById("finalizado").checked?"finalizado":void 0}},{key:"validateRequiredEntries",value:function(e,t,a){var s=!0,i=document.getElementById("nombre").classList,c=document.getElementById("startDate").classList,n=document.getElementById("priority").classList;return s&=this.validate(e,i),s&=this.validate(t,c),s&=this.validatePriority(n)}},{key:"validatePriority",value:function(e){var t=document.getElementById("baja"),a=document.getElementById("media"),s=document.getElementById("alta");return t.checked||a.checked||s.checked?(e.remove("incorrect"),!0):(e.add("incorrect"),!1)}},{key:"validate",value:function(e,t){return""==e?(t.add("incorrect"),!1):(t.remove("incorrect"),!0)}},{key:"render",value:function(){var e=this,t=this,a=function(){return t.setState({modalTotal:!t.state.modalTotal})},s=function(){return t.setState({modal:!t.state.modal})};return Object(w.jsxs)("div",{children:[Object(w.jsx)(T.a,{color:"secondary",onClick:a,children:"Agregar Tarea"}),Object(w.jsxs)(C.a,{isOpen:this.state.modalTotal,toggle:a,children:[Object(w.jsx)(S.a,{id:"header",toggle:a,children:"Nueva Tarea"}),Object(w.jsxs)(M.a,{children:[Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"nombreTarea",id:"nombre",children:"Nombre Tarea *"}),Object(w.jsx)(E.a,{type:"string",name:"nombreTarea",id:"nombreTarea",className:"general",maxLength:"256",required:!0})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"fechaInicio",id:"startDate",children:"Fecha Inicio *"}),Object(w.jsx)(E.a,{type:"date",name:"fechaInicio",id:"fechaInicio",className:"general fecha",required:!0})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"fechaFin",children:"Fecha Fin"}),Object(w.jsx)(E.a,{type:"date",name:"fechaFin",id:"fechaFin",className:"general fecha"})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"recurso",id:"recursoLabel",children:"C\xf3digo Recurso"}),Object(w.jsx)(N.a,{id:"labelRecurso",children:""==this.codigoRecurso?"-":this.codigoRecurso}),Object(w.jsx)(T.a,{id:"botonRecurso",onClick:function(){return t.asignarRecurso()},children:"Seleccionar Recurso"})]}),Object(w.jsxs)(P.a,{tag:"fieldset",children:[Object(w.jsx)(N.a,{className:"parametro",children:"Estado"}),Object(w.jsxs)(P.a,{children:[Object(w.jsxs)(N.a,{className:"radio",check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"iniciado"})," ","Iniciado"]}),Object(w.jsxs)(N.a,{className:"radio",check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"enProceso"})," ","En Proceso"]}),Object(w.jsxs)(N.a,{className:"radio",check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio",id:"finalizado"})," ","Finalizado"]})]})]}),Object(w.jsxs)(P.a,{tag:"fieldset",children:[Object(w.jsx)(N.a,{className:"parametro",id:"priority",children:"Prioridad *"}),Object(w.jsxs)(P.a,{children:[Object(w.jsxs)(N.a,{className:"radio2",check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio2",id:"baja"})," ","Baja"]}),Object(w.jsxs)(N.a,{className:"radio2",check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio2",id:"media"})," ","Media"]}),Object(w.jsxs)(N.a,{className:"radio2",check:!0,children:[Object(w.jsx)(E.a,{type:"radio",name:"radio2",id:"alta"})," ","Alta"]})]})]}),Object(w.jsxs)(P.a,{children:[Object(w.jsx)(N.a,{className:"parametro",for:"descripcion",id:"desc",children:"Descripci\xf3n "}),Object(w.jsx)(E.a,{type:"textarea",name:"descripcion",id:"descripcion",className:"general",maxLength:"256",required:!0})]}),Object(w.jsx)(T.a,{onClick:function(){return e.crearTarea()},children:"Crear Tarea"}),Object(w.jsx)("label",{id:"requisitosLabel",children:"(*) para aquellos campos que sean requeridos obligatoriamente"})]})]}),Object(w.jsxs)(C.a,{isOpen:this.state.modal,toggle:s,className:"popupError",onClosed:this.state.modalOnClose,children:[Object(w.jsx)(S.a,{toggle:s,children:this.state.modalHeader}),Object(w.jsx)(M.a,{children:this.state.modalBody})]})]})}}]),a}(s.Component)),Oe=Object(U.g)(be),pe=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={tareas:[],nombreProyecto:"",isLoading:!0},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loadTareas()}},{key:"loadTareas",value:function(){var e=this,t=this.props.match.params.id;fetch("https://proyectopsa.herokuapp.com/proyectos/".concat(t,"/tarea")).then((function(e){return e.json()})).then((function(t){e.setState({tareas:t,isLoading:!1})}),(function(e){console.log(e)})),fetch("https://proyectopsa.herokuapp.com/proyectos/".concat(t)).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({nombreProyecto:t.proyecto.nombre})}),(function(e){console.log(e)}))}},{key:"getBadgeColor",value:function(e){switch(e){case"Iniciado":return"danger";case"Finalizado":return"success";case"En proceso":return"warning"}}},{key:"render",value:function(){var e=this,t=this.props.match.params.id;return Object(w.jsxs)("div",{children:[Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:12,lg:12,children:Object(w.jsxs)(j.a,{children:[Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/",children:"Home"})}),Object(w.jsx)(u.a,{children:Object(w.jsx)(V.b,{to:"/proyectos/",children:"Proyectos"})}),Object(w.jsx)(u.a,{active:!0,children:"Tareas"})]})})}),Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{xl:{size:6,offset:3},children:Object(w.jsxs)(b.a,{children:[Object(w.jsx)(O.a,{tag:"h2",children:"Tareas"}),Object(w.jsx)(p.a,{children:Object(w.jsx)(x.a,{children:this.state.isLoading?Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{className:"text-center",children:Object(w.jsx)(H.a,{type:"TailSpin",color:"#00BFFF",height:50,width:50})})}):Object(w.jsx)(l.a,{children:Object(w.jsx)(h.a,{children:Object(w.jsxs)(A.a,{striped:!0,children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Nombre"}),Object(w.jsx)("th",{children:"Estado"}),Object(w.jsx)("th",{children:Object(w.jsx)(Oe,{onClose:function(){return e.loadTareas()}})})]})}),Object(w.jsx)("tbody",{children:this.state.tareas.map((function(a){var s=a.estado.charAt(0).toUpperCase()+a.estado.slice(1),i=e.getBadgeColor(s);return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{children:a.nombre}),Object(w.jsx)("td",{children:Object(w.jsx)(X.a,{color:i,children:s})}),Object(w.jsx)("td",{children:Object(w.jsx)(V.b,{to:"/proyectos/".concat(t,"/tareas/").concat(a.codigo),children:Object(w.jsx)(T.a,{color:"info",children:"Ver Tarea"})})})]},a.legajo)}))})]})})})})})]})})})]})}}]),a}(s.Component);var xe=function(e){var t=Object(U.f)();return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("header",{className:"App-header-ppal",children:Object(w.jsxs)("div",{id:"headerContainer",className:"MuiToolbar-root MuiToolbar-root App-subheader-height MuiToolbar-gutters",children:[Object(w.jsx)("div",{id:"homeButton",onClick:function(){return t.push("/")},children:Object(w.jsxs)(h.a,{xl:12,lg:12,children:[" ",Object(w.jsx)(z.a,{})," HOME"]})}),Object(w.jsx)("div",{id:"companyName",children:Object(w.jsx)(h.a,{xl:12,lg:12,children:"PSA"})})]})}),Object(w.jsx)("main",{children:Object(w.jsxs)(U.c,{children:[Object(w.jsx)(U.a,{exact:!0,path:"/proyectos",component:Z}),Object(w.jsx)(U.a,{exact:!0,path:"/proyectos/:id/tareas",component:pe}),Object(w.jsx)(U.a,{exact:!0,path:"/proyectos/:id/tareas/:idtarea",component:ie}),Object(w.jsx)(U.a,{exact:!0,path:"/",component:ue}),Object(w.jsx)(U.a,{exact:!0,path:"/recursos",component:$}),Object(w.jsx)(U.a,{exact:!0,path:"/cargadehoras/:id",component:K}),Object(w.jsx)(U.a,{exact:!0,path:"/soporte",component:re}),Object(w.jsx)(U.a,{path:"/soporte/ticket_detail",component:he})]})})]})};c.a.render(Object(w.jsx)(V.a,{basename:"/ProyectoPSATribu1",children:Object(w.jsx)(xe,{})}),document.getElementById("root"))},76:function(e,t,a){}},[[337,1,2]]]);
//# sourceMappingURL=main.7ac4f5c1.chunk.js.map